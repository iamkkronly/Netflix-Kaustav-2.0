# CloudRay - Unlimited Telegram Cloud Storage Platform
## Copyright Notice: Copyright (c) 2025 Kaustav Ray

## I. Vision & Core Constraints

**Project Name:** CloudRay
**Mission:** To provide a free, fast, and secure web interface for unlimited cloud storage by exclusively leveraging a user's Telegram "Saved Messages" chat as the primary storage backend.

### A. Technology & Architecture Stack

| Layer | Technology | Constraint |
|---|---|---|
| Frontend/API | Next.js (App Router) | Full-stack framework optimized for Vercel. |
| Deployment | Vercel | Must utilize Vercel Serverless Functions and Edge for optimal performance. |
| Database | MongoDB Atlas | Used only for storing file metadata and indexing (File Name, Folder Path, Message ID, Size, Share Link Data). |
| Storage Engine | Telegram API | All binary data (files) must be uploaded to and downloaded from the user's "Saved Messages" chat. |
| Styling | Tailwind CSS | Mandatory for responsive, modern UI/UX design. |

### B. Critical Technical Constraint: Large File Upload

The solution MUST address the Vercel Serverless Function payload limit of 4.5MB. Since Telegram supports file uploads up to 2GB, the application must implement a client-side solution (e.g., streaming or chunking) that allows large files to be processed by the Next.js API Routes and forwarded to the Telegram API without exceeding the Vercel function limits per request/chunk.

## II. Deployment & Environment Variables

The project must be configured to deploy seamlessly to Vercel and securely access external services.

* **MongoDB Connection:**
  * `MONGODB_URI`: Placeholder for the MongoDB Atlas connection string.
  * `DB_NAME`: The name of the database to use for metadata (e.g., cloudray_metadata).
* **Telegram API Keys (Required for communication):**
  * `TELEGRAM_API_ID`: User's Telegram API ID.
  * `TELEGRAM_API_HASH`: User's Telegram API Hash.
  * *Note: These should be retrieved securely via the Telegram Login Widget during user authentication.*

## III. Functional Requirements: Web Application

### A. Authentication & Session Management

* **Telegram Login:** Use the official Telegram Login Widget (or equivalent API method) to securely authenticate the user and obtain the necessary session/API tokens for future communication.
* **State Management:** Securely store the user's active Telegram session tokens in the MongoDB database for persistence across serverless function calls.

### B. File and Folder Management (Dashboard)

* **Virtual File System (VFS):**
  * Frontend must display a true hierarchical folder structure, generated by parsing the `folder_path` metadata stored in MongoDB.
  * Default View: List View (with toggle for Gallery View).
* **Core Operations:**
  * **Upload:** Implement the robust, Vercel-compatible large file upload handler (chunking/streaming). Show real-time progress.
  * **Download:** Allow single file download and multi-file download (generate a temporary ZIP serverlessly or client-side and stream the individual Telegram file parts).
  * **CRUD:** Create, Rename, and Delete files and folders (all actions must update both the MongoDB metadata and the corresponding Telegram message status).
* **Media Features:**
  * **Gallery View:** A dedicated, fast-loading view for all image and video files.
  * **In-App Player:** Integrated audio and video player that streams content directly from Telegram using temporary, authenticated download links.

### C. Search, Indexing, and Sharing

* **Instant Search:** Implement a high-speed search functionality that queries the MongoDB metadata for file names and paths, resulting in instant filtering of the VFS.
* **Secure Sharing:**
  * Allow users to generate unique, tokenized share links for any file or folder.
  * The sharing function must be implemented via a separate Next.js Edge Function to ensure global low-latency access to the publicly shared metadata.
  * Options: Password protection and expiry time limits.

## IV. Marketing Website (Landing Page)

Develop a high-conversion, responsive single-page marketing website for the root domain.

* **Aesthetics:** Sleek, modern, and trustworthy design using Tailwind CSS. Must be fully optimized for mobile first.
* **Headline:** Boldly state the value proposition: "CloudRay: The Free, Unlimited Cloud Storage Powered by Telegram."
* **Visuals:** Use high-quality, professional mockups showing the VFS interface.
* **Feature Callouts (Visible on scroll):**
  * Unlimited Capacity (Telegram Powered)
  * Zero Cost & Zero Compromise
  * Secure (Your Data Stays on Telegram)
  * Integrated Media Streaming
  * Fast, Instant Search
* **Call to Action (CTA):** Prominent button in the header and footer: "Start Storing Free! (Login with Telegram)" that links directly to the app's login flow.